<!DOCTYPE html>
<html>
<head>
    <title>Chat Test</title>
    <script src="/webjars/jquery/jquery.min.js"></script>
    <script src="/webjars/sockjs-client/sockjs.min.js"></script>
    <script src="/webjars/stomp-websocket/stomp.min.js"></script>
    <script>
        $(function () {
            var socket = new SockJS('/chat');
            var stompClient = Stomp.over(socket);
            stompClient.connect({}, function (frame) {
                stompClient.subscribe('/topic/messages', function (message) {
                    showMessage(JSON.parse(message.body));
                });
            });
            $('#messageForm').on('submit', function (e) {
                e.preventDefault();
                var message = $('#message').val();
                if (message.trim() !== '') {
                    stompClient.send('/app/chat', {}, JSON.stringify({content: message}));
                    $('#message').val('');
                }
            });
            function showMessage(message) {
                var html = '<div class="message">' + message.content + '</div>';
                $('#messages').append(html);
            }
        });
    </script>
    <style>
        .message {
            margin: 10px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
    </style>
</head>
<body>
<div id="messages"></div>
<form id="messageForm">
    <input type="text" id="message" placeholder="Type your message here">
    <button type="submit">Send</button>
</form>
</body>
</html>
